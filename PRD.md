# whereorwhen — Product Requirements Document

**작성일:** 2026-02-12
**버전:** 1.0
**상태:** Draft

---

## 1. 개요

### 1.1 배경

여행자가 "언제 가야 좋은지" 또는 "이번 주말 어디가 좋은지"를 판단하려면 날씨 사이트, 환율 사이트, 공휴일 캘린더, 블로그 검색 등 4-5개 소스를 직접 확인하고 머릿속에서 종합해야 함. 이 과정을 자동화하여 하나의 종합 점수로 제공하는 서비스가 whereorwhen임.

### 1.2 서비스 정의

**whereorwhen**은 여행지별 최적 시기를 종합 점수로 알려주는 웹서비스.

- 모드 A ("Where is decided, When?"): 목적지를 정한 유저에게 언제 가야 최적인지 12개월 캘린더로 제공
- 모드 B ("When is decided, Where?"): 날짜를 정한 유저에게 어디가 최적인지 여행지 랭킹으로 제공

### 1.3 목표

- 여행 계획 단계의 사용자에게 데이터 기반 의사결정 도구 제공
- 100% 자동화된 데이터 수집 및 점수 산출 (수동 작업 제로)
- 무료 API만 사용하여 운영 비용 최소화
- 향후 마이리얼트립 Growth Loop 상단 유입 도구로 활용

### 1.4 비목표 (Out of Scope)

- 항공권/숙소 가격 비교 (기존 서비스와 중복)
- 여행 일정 생성기
- 사용자 간 소셜 기능
- 모바일 네이티브 앱 (MVP는 웹만)

---

## 2. 타겟 유저

### 2.1 Primary Persona

**"계획형 직장인 여행자"**

- 연령: 25-45세
- 여행 빈도: 연 1-3회 해외여행
- 행동 패턴: 휴가 날짜가 먼저 정해지고 → 여행지를 검색하거나, 가고 싶은 곳이 있는데 → 언제 가야 할지 고민
- 현재 행동: 네이버/구글에서 "도쿄 언제 가면 좋아", "3월 해외여행 추천" 검색 → 블로그 3-5개 읽고 판단
- 페인 포인트: 정보가 산발적이고, 올해 기준인지 확실하지 않으며, 날씨/환율/혼잡도를 종합한 판단이 어려움

### 2.2 User Journey

1. **인지**: SNS/검색에서 "2026년 3월 여행 Best 여행지 TOP 10" 콘텐츠 발견
2. **유입**: whereorwhen 웹사이트 방문
3. **탐색**: 모드 A(목적지 선택) 또는 모드 B(날짜 선택)로 점수 확인
4. **상세**: 점수 클릭하여 날씨/환율/혼잡도/버즈 breakdown 확인
5. **전환**: (향후) "이 여행지 항공편 보기" → 마리트로 연결

---

## 3. 핵심 기능

### 3.1 모드 A — 목적지 → 시기 (When to Go)

**입력:** 여행지 선택 (드롭다운 또는 검색)

**출력:** 12개월 캘린더 뷰

| 구성 요소 | 설명 |
|----------|------|
| 월별 종합 점수 | 1.0 ~ 10.0 스코어, 색상 그라데이션 (빨간→초록) |
| 주별 상세 | 월 클릭 시 주별 점수 drill-down |
| Best 구간 하이라이트 | 최고 점수 구간을 시각적으로 강조 |
| 현재 시점 표시 | "지금" 표시 + "현재 점수" 노출 |

### 3.2 모드 B — 시기 → 목적지 (Where to Go)

**입력:** 날짜 선택 (달력 또는 월/주 선택)

**출력:** 여행지 랭킹 리스트

| 구성 요소 | 설명 |
|----------|------|
| 순위 리스트 | 20개 도시를 점수 순으로 정렬 |
| 점수 + 주요 이유 | "1위 다낭 9.1 — 건기, 환율 유리, 한산한 시기" |
| 지도 뷰 | 세계지도 위에 점수를 버블로 시각화 (선택적) |

### 3.3 모드 전환 — 슬라이더 UI

- 화면 상단에 슬라이더: "Where → When" ↔ "When → Where"
- 전환 시 입력 UI가 자연스럽게 변경 (목적지 드롭다운 ↔ 날짜 선택)
- 슬라이더 양쪽 끝에 모드명 표시

### 3.4 점수 상세 (Score Breakdown)

점수 클릭 시 상세 패널 또는 모달 표시:

| 항목 | 표시 내용 |
|------|----------|
| 날씨 점수 | "맑은 날 75%, 평균 18°C" + 아이콘 |
| 비용 점수 | "엔화 평균 대비 8% 저렴" + 추이 그래프 |
| 혼잡도 점수 | "한국 공휴일 없음, 현지 골든위크 전" |
| 버즈 점수 | "블로그 언급량 연중 3위" + 키워드 태그 |
| 종합 점수 | 4개 요소의 가중 평균 |

### 3.5 자동 콘텐츠 생성 (SEO/바이럴)

- 매월 1일 자동 생성: "2026년 N월 여행 Best 여행지 TOP 10"
- 각 여행지별 자동 생성: "[도시명] 여행 최적 시기 가이드"
- SNS 공유용 카드 이미지 자동 생성 (OG 이미지)

### 3.6 향후 기능 (v2 이후)

| 기능 | 설명 |
|------|------|
| 알림 | "도쿄 점수가 8점 이상이 되면 알려줘" |
| 비교 | "4/1-4/5 vs 4/15-4/19 도쿄 점수 비교" |
| 마리트 연결 | 점수 상세에서 마리트 항공/숙소 검색 링크 |
| 도시 확장 | 20개 → 50개 → 100개 |

---

## 4. 점수 알고리즘

### 4.1 종합 점수 공식

**종합 점수 = W1 x 날씨 + W2 x 비용 + W3 x 혼잡도 + W4 x 버즈**

- 각 요소는 1.0 ~ 10.0 범위로 정규화
- 가중치 초기값 (검증 후 조정):

| 요소 | 가중치 | 이유 |
|------|--------|------|
| 날씨 (W1) | 0.35 | 여행 경험에 가장 직접적 영향 |
| 비용 (W2) | 0.25 | 의사결정에 중요하지만 절대적이지 않음 |
| 혼잡도 (W3) | 0.15 | 추정치이므로 가중치 낮게 |
| 버즈 (W4) | 0.25 | 시즌 매력도 반영, 데이터 신뢰도 높음 |

### 4.2 날씨 점수 (Weather Score)

**데이터 소스:** Open-Meteo Historical Weather API

**산출 로직:**
1. 해당 도시의 과거 30년 기상 데이터에서 해당 월의 일별 데이터 추출
2. 맑은 날 비율 산출 (강수량 1mm 미만인 날 / 전체 날)
3. 평균 기온이 쾌적 범위(15-28°C)에 가까울수록 높은 점수
4. 극단적 기온(0°C 미만 또는 35°C 초과)은 감점
5. 강수량이 일평균 10mm 이상이면 감점

**점수 매핑:**
- 맑은 날 80%+ 이고 기온 18-25°C → 9-10점
- 맑은 날 60-80% 이고 기온 10-30°C → 7-8점
- 맑은 날 40-60% 또는 기온 5-35°C → 5-6점
- 맑은 날 40% 미만 또는 극단 기온 → 3-4점

### 4.3 비용 점수 (Cost Score)

**데이터 소스:** ExchangeRate API (또는 Open Exchange Rates)

**산출 로직:**
1. 해당 도시의 현지 통화 대 KRW 환율을 일별로 수집
2. 현재 환율 vs 최근 1년 평균 환율 비교
3. 평균 대비 저렴할수록 높은 점수

**점수 매핑:**
- 평균 대비 10%+ 저렴 → 9-10점
- 평균 대비 5-10% 저렴 → 7-8점
- 평균과 유사 (+-5%) → 5-6점
- 평균 대비 5-10% 비쌈 → 3-4점
- 평균 대비 10%+ 비쌈 → 1-2점

### 4.4 혼잡도 점수 (Crowd Score)

**데이터 소스:** Nager.Date API (한국 + 현지 공휴일)

**산출 로직:**
1. 해당 주간에 한국 공휴일이 있는지 확인 (특히 연휴)
2. 해당 주간에 현지 공휴일/연휴가 있는지 확인
3. 시즌 가중치 적용 (7-8월 여름 성수기, 12월 말-1월 초 겨울 성수기)

**점수 매핑:**
- 한국 연휴 없음 + 현지 연휴 없음 + 비수기 → 9-10점
- 한국 연휴 없음 + 현지 연휴 없음 + 성수기 → 6-7점
- 한국 연휴 또는 현지 연휴 중 하나 → 4-5점
- 한국 연휴 + 현지 연휴 겹침 → 1-3점

### 4.5 버즈 점수 (Buzz Score)

**데이터 소스:** Naver Blog Search API

**산출 로직:**
1. 여행지별 핵심 키워드 정의 (예: "도쿄 여행", "도쿄 벚꽃", "도쿄 단풍")
2. 키워드별 월간 블로그 포스팅 수를 API total count로 집계
3. 과거 2-3년 데이터 기반 월별 버즈 인덱스 생성
4. 해당 월의 버즈가 연간 평균 대비 높을수록 높은 점수 (= 그 달이 시즌)

**점수 매핑:**
- 연간 최고 버즈 월 → 9-10점
- 연간 평균 대비 50%+ 높음 → 7-8점
- 연간 평균과 유사 → 5-6점
- 연간 평균 대비 50% 미만 → 3-4점

**키워드 예시:**

| 도시 | 키워드 |
|------|--------|
| 도쿄 | "도쿄 여행", "도쿄 벚꽃", "도쿄 단풍", "도쿄 카페" |
| 방콕 | "방콕 여행", "방콕 맛집", "방콕 야시장", "송크란" |
| 파리 | "파리 여행", "파리 에펠탑", "파리 크리스마스" |

- 도시별 5-10개 키워드를 초기 설정하며, 키워드 리스트는 버즈 데이터 분석 후 최적화함

---

## 5. 기술 요구사항

### 5.1 인터페이스 유형

- GUI 필요 (웹 애플리케이션)
- 반응형 디자인 (데스크톱 + 모바일 웹)

### 5.2 트리거 방식

- 사용자 액션: 목적지/날짜 선택 시 실시간 점수 표시
- 자동 스케줄: 데이터 수집 배치 (일 1회 환율, 월 1회 날씨/버즈 갱신)

### 5.3 데이터 저장

| 데이터 | 저장 여부 | 갱신 주기 |
|--------|----------|----------|
| 날씨 이력 (30년) | 저장 (초기 1회 수집, 연 1회 갱신) | 연 1회 |
| 환율 | 저장 (일별 스냅샷) | 일 1회 |
| 공휴일 | 저장 (연초 1회 수집) | 연 1회 |
| 블로그 버즈 | 저장 (월별 집계) | 월 1회 |
| 산출된 점수 | 캐시 (빠른 응답) | 일 1회 재계산 |

### 5.4 외부 API 연동

| API | 엔드포인트 | 인증 | 호출 빈도 | Rate Limit |
|-----|----------|------|----------|------------|
| Open-Meteo | /v1/archive | 키 불필요 | 초기 대량 + 연 1회 | 요청 제한 없음 |
| ExchangeRate API | /v6/latest | 무료 키 | 일 1회 | 1,500콜/월 |
| Nager.Date | /api/v3/publicholidays | 키 불필요 | 연 1회 | 제한 없음 |
| Naver Blog Search | /v1/search/blog.json | Client ID/Secret | 월 1회 x 도시 x 키워드 | 25,000콜/일 |
| Google Maps JS API | Maps JavaScript API | API Key | 사용자 요청시 | 월 $200 크레딧 |

### 5.5 추천 기술 스택

| 레이어 | 기술 | 이유 |
|--------|------|------|
| Frontend | Next.js (React) | SSR/SSG로 SEO 최적화, 자동 콘텐츠 생성에 유리 |
| 지도 | Google Maps JavaScript API 또는 Mapbox GL JS (무료 티어) | 인터랙티브 지도 |
| Backend | Next.js API Routes 또는 별도 Node.js | API 프록시, 점수 계산 |
| Database | SQLite 또는 Supabase (무료 티어) | 경량, MVP에 적합 |
| 배치 | Cron job (Vercel Cron 또는 GitHub Actions) | 무료, 데이터 수집 스케줄링 |
| 호스팅 | Vercel (무료 티어) | Next.js 최적화, 자동 배포 |
| 캐시 | 정적 생성 (ISR) | 점수 데이터를 빌드 타임에 생성 |

---

## 6. UI/UX 설계

### 6.1 화면 구조

**메인 화면:**

| 영역 | 구성 |
|------|------|
| 상단 | 로고 + 서비스 설명 한 줄 |
| 모드 전환 | 슬라이더 (Where → When / When → Where) |
| 입력 영역 | 모드 A: 도시 선택 드롭다운 / 모드 B: 달력 선택 |
| 결과 영역 | 모드 A: 12개월 캘린더 / 모드 B: 랭킹 리스트 |
| 하단 | 자동 생성 콘텐츠 링크 (이달의 Best 여행지 등) |

**점수 상세 패널:**

| 영역 | 구성 |
|------|------|
| 헤더 | 도시명 + 기간 + 종합 점수 (큰 숫자) |
| 날씨 | 점수 + "맑은 날 75%, 평균 18°C" + 기온 그래프 |
| 비용 | 점수 + "평균 대비 8% 저렴" + 환율 추이선 |
| 혼잡도 | 점수 + "공휴일 없음, 비수기" |
| 버즈 | 점수 + "벚꽃 시즌, 블로그 언급 연중 최고" + 키워드 태그 |

### 6.2 색상 시스템

| 점수 범위 | 색상 | 의미 |
|----------|------|------|
| 8.0 - 10.0 | 초록 (#22C55E 계열) | 최적 |
| 6.0 - 7.9 | 연두/노란 (#EAB308 계열) | 괜찮음 |
| 4.0 - 5.9 | 주황 (#F97316 계열) | 보통 |
| 1.0 - 3.9 | 빨간 (#EF4444 계열) | 비추천 |

### 6.3 반응형 설계

| 화면 크기 | 레이아웃 |
|----------|---------|
| 데스크톱 (1024px+) | 캘린더 12개월 그리드 (3x4 또는 4x3) |
| 태블릿 (768-1023px) | 캘린더 6개월씩 2행 |
| 모바일 (767px 이하) | 캘린더 리스트 형태, 랭킹은 카드 UI |

---

## 7. MVP 커버리지

### 7.1 도시 목록 (한국인 방문객 순 상위 20개)

| 순위 | 도시 | 국가 | 통화 |
|------|------|------|------|
| 1 | 오사카 | 일본 | JPY |
| 2 | 도쿄 | 일본 | JPY |
| 3 | 후쿠오카 | 일본 | JPY |
| 4 | 다낭 | 베트남 | VND |
| 5 | 방콕 | 태국 | THB |
| 6 | 괌 | 미국 | USD |
| 7 | 세부 | 필리핀 | PHP |
| 8 | 타이베이 | 대만 | TWD |
| 9 | 싱가포르 | 싱가포르 | SGD |
| 10 | 홍콩 | 홍콩 | HKD |
| 11 | 발리 | 인도네시아 | IDR |
| 12 | 코타키나발루 | 말레이시아 | MYR |
| 13 | 삿포로 | 일본 | JPY |
| 14 | 오키나와 | 일본 | JPY |
| 15 | 하와이 | 미국 | USD |
| 16 | 파리 | 프랑스 | EUR |
| 17 | LA | 미국 | USD |
| 18 | 런던 | 영국 | GBP |
| 19 | 바르셀로나 | 스페인 | EUR |
| 20 | 시드니 | 호주 | AUD |

- 최종 리스트는 한국관광공사 출입국 통계 기반으로 검증 후 확정

### 7.2 도시별 필요 데이터

| 데이터 | 수집 항목 |
|--------|----------|
| 위치 | 위도/경도 (Open-Meteo 쿼리용) |
| 날씨 | 30년 일별 기온, 강수량, 맑은 날 여부 |
| 통화 | 현지 통화 코드, KRW 대비 환율 |
| 공휴일 | 한국(KR) + 현지 국가 코드의 공휴일 |
| 버즈 키워드 | 도시별 5-10개 네이버 블로그 검색 키워드 |

---

## 8. 성공 지표

### 8.1 런칭 후 1개월

| 지표 | 목표 | 측정 방법 |
|------|------|----------|
| 월간 방문자 (UV) | 10,000 | Google Analytics |
| 평균 체류 시간 | 2분+ | Google Analytics |
| 점수 상세 조회율 | 30%+ | 이벤트 트래킹 |
| SNS 공유 수 | 500+ | 공유 버튼 클릭 트래킹 |

### 8.2 런칭 후 3개월

| 지표 | 목표 | 측정 방법 |
|------|------|----------|
| 월간 방문자 (UV) | 50,000 | Google Analytics |
| 재방문율 | 20%+ | Google Analytics |
| 자동 콘텐츠 SEO 유입 | 전체 트래픽의 40%+ | Google Search Console |
| 마리트 연결 클릭 (v2) | 1,000+ | 이벤트 트래킹 |

---

## 9. 리스크 및 대응

| 리스크 | 영향도 | 대응 |
|--------|--------|------|
| 무료 API Rate Limit 초과 | 높음 | 데이터를 캐시/저장하여 API 호출 최소화. 배치 수집 + 정적 생성 |
| 환율 API 서비스 중단 | 중 | 대체 무료 환율 API 2개 이상 확보 (Frankfurter 등) |
| 날씨 점수의 정확도 | 중 | 30년 평균이므로 개별 연도 이상 기후는 반영 불가 — 면책 문구 표기 |
| 혼잡도 추정의 정확도 | 높음 | 공휴일 기반 프록시는 한계 명확 — "추정치"로 명시, 가중치 낮게 |
| Naver Blog API 정책 변경 | 중 | YouTube Data API를 백업 소스로 준비 |
| 도시 확장 시 키워드 관리 | 낮음 | 도시 추가 시 키워드 자동 생성 로직 필요 (향후) |

---

## 10. 타임라인

| 주차 | 마일스톤 | 산출물 |
|------|---------|--------|
| W1 | PRD 확정 + 기술 스펙 작성 | PRD, IMPLEMENTATION_PLAN.md |
| W2-3 | 데이터 수집 파이프라인 구축 | 4개 API 연동, DB 저장, 배치 스케줄 |
| W3-4 | 점수 산출 알고리즘 구현 | 점수 계산 로직, 20개 도시 점수 데이터 |
| W4-5 | 웹 UI 구현 | 모드 A/B, 캘린더, 랭킹, 점수 상세 |
| W5 | 자동 콘텐츠 생성 | 월별 TOP 10, 도시별 가이드 페이지 |
| W6 | 내부 테스트 + 점수 검증 | QA 리포트, 점수 정확도 리뷰 |
| W7 | 베타 런칭 | 퍼블릭 URL 오픈 |

---

## 11. 부록

### 11.1 API 상세 스펙

**Open-Meteo Historical Weather API**
- Base URL: https://archive-api.open-meteo.com/v1/archive
- 주요 파라미터: latitude, longitude, start_date, end_date, daily (temperature_2m_max, temperature_2m_min, precipitation_sum, weathercode)
- 응답: JSON, 일별 기상 데이터
- 제한: 없음 (Fair use)

**ExchangeRate API**
- Base URL: https://v6.exchangerate-api.com/v6/{API_KEY}/latest/KRW
- 주요 파라미터: base currency
- 응답: JSON, 통화별 환율
- 제한: 무료 플랜 1,500콜/월

**Nager.Date API**
- Base URL: https://date.nager.at/api/v3/publicholidays/{year}/{countryCode}
- 주요 파라미터: year, countryCode (KR, JP, TH 등)
- 응답: JSON, 공휴일 목록 (날짜, 이름, 유형)
- 제한: 없음

**Naver Blog Search API**
- Base URL: https://openapi.naver.com/v1/search/blog.json
- 주요 파라미터: query, display, start, sort
- 헤더: X-Naver-Client-Id, X-Naver-Client-Secret
- 응답: JSON, total (전체 결과 수), items (블로그 목록)
- 제한: 25,000콜/일

### 11.2 경쟁 서비스 분석

| 서비스 | 제공 정보 | 차별화 포인트 |
|--------|----------|-------------|
| Google "Best time to visit" | 월별 날씨 + 관광 시즌 | 날씨만, 종합 점수 없음, 한국 관점 아님 |
| Champion Traveler | 월별 날씨 점수 | 날씨 전용, 환율/혼잡도 미포함 |
| WeatherSpark | 과거 날씨 시각화 | 날씨 전용, 여행 관점이 아님 |
| 네이버 블로그 | "[도시] 여행 최적 시기" 검색 | 정보 산발적, 최신성 불확실, 개인 의견 기반 |

**whereorwhen 차별화:**
- 날씨+환율+혼잡도+버즈 4가지 요소를 하나의 점수로 통합
- 한국 여행자 관점 (원화 환율, 한국 공휴일, 한국 블로그 버즈)
- 모드 B (날짜→여행지)는 기존 서비스에 거의 없는 역방향 추천
- 매월 자동 생성되는 콘텐츠로 SEO/바이럴 내재화

---

**다음 단계:** 기술 스펙(IMPLEMENTATION_PLAN.md) 작성 → 프로토타입 개발
